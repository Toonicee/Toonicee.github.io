(this.webpackJsonpsocial=this.webpackJsonpsocial||[]).push([[0],{225:function(e,t,n){e.exports=n(391)},391:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(5),c=n.n(l),i=n(37),o=n(12),u=n(65),s=n(200),m=n(80),d=n.n(m);d.a.defaults.baseURL="https://conduit.productionready.io/api/";var p={getAll:function(e){return d.a.get("/articles?".concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"limit=".concat(e,"&offset=").concat(t?t*e:0)}(10,e)))}},f={current:function(){return d.a.get("/user")},register:function(e){return d.a.post("/users",e)},login:function(e){return d.a.post("/users/login",e)}},E=function(e){e&&(d.a.defaults.headers.common.Authorization="Token ".concat(e))},h=n(56),g={currentUser:{},error:null,isAutoUser:null,isSuccess:!1},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"REGISTER":return Object(h.a)({},e,{currentUser:t.payload.user,isAutoUser:!0});case"LOGOUT":return Object(h.a)({},e,{currentUser:{},isAutoUser:!1});case"SET_USER_DATA_SUCCESS":return Object(h.a)({},e,{isAutoUser:!0,currentUser:t.payload.user});case"SET_USER_DATA_FAILURE":return Object(h.a)({},e,{isAutoUser:!1,error:t.payload});default:return e}},v={articles:[],isProgres:!1},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ARTICLE_SUCCESS":return Object(h.a)({},e,{articles:t.payload.articles,articlesCount:t.payload.articlesCount});case"SET_PAGE":return console.log(t),Object(h.a)({},e,{currentPage:t.payload});case"DOWNLOAD_PROGRESS":return Object(h.a)({},e,{isProgres:!0});default:return e}},y=Object(u.c)({auth:b,article:x}),O=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,_=Object(u.e)(y,O(Object(u.a)(s.a,(function(){return function(e){return function(t){"REGISTER"===t.type||"LOGIN"===t.type?t.error||(localStorage.setItem("jwt",t.payload.user.token),E(t.payload.user.token)):"LOGOUT"===t.type&&(window.localStorage.setItem("jwt",""),E(null)),e(t)}}})))),w=n(201),j=n(202),S=n(220),A=n(203),U=n(223),k=n(69),P=n(14),L=n(15),R=n(395),T=n(393),z=n(13);function C(){var e=Object(P.a)(["\n  padding: 45px;\n  background-color: ",";\n  box-shadow: 0px 0px 25px rgba(0, 0, 0, 0.04204);\n  border-radius: 3px;\n"]);return C=function(){return e},e}var N=function(e){var t=e.children,n=e.backcolor;return r.a.createElement(I,{backcolor:n,className:"block"},t)};N.defaultProps={backcolor:""};var I=L.a.div(C(),(function(e){return e.backcolor})),F=N,D=n(137),G=n(396),q=n(397),M=function(e){return e.touched&&e.error?"error":e.touched?"success":""},V=function(e){var t=e.name,n=e.placeholder,a=e.children,l=e.size,c=Object(z.e)(t),i=Object(D.a)(c,2)[1];return r.a.createElement(R.a.Item,{name:t,hasFeedback:!0,validateStatus:M(i)},r.a.createElement("label",{htmlFor:t},a),r.a.createElement(G.a.Password,{prefix:r.a.createElement(q.a,{className:"site-form-item-icon"}),size:l,id:t,name:t,placeholder:n}))};V.defaultProps={placeholder:"",children:null,size:"default"};var W=V,B=n(9),J=function(e){var t=e.name,n=e.children,a=e.placeholder,l=e.type,c=e.icon,i=e.size,o=e.validating,u=Object(z.e)(t),s=Object(D.a)(u,2)[1],m=o?M(s):null;return r.a.createElement(R.a.Item,{name:t,hasFeedback:!0,validateStatus:m},r.a.createElement("label",{htmlFor:t},n),r.a.createElement(G.a,{prefix:r.a.createElement(B.a,{type:c}),size:i,id:t,type:l,name:t,placeholder:a}))};J.defaultProps={type:"text",placeholder:"",children:null,size:"default",icon:"none",validating:!0};var X=J,Z=function(e){var t=e.name,n=e.children,a=e.placeholder;return r.a.createElement(R.a.Item,{name:t},r.a.createElement("label",{htmlFor:t},n),r.a.createElement(G.a.TextArea,{id:t,name:t,placeholder:a}))};Z.defaultProps={placeholder:"",children:null};var K=Z,$=function(e){return r.a.createElement(i.b,{to:"/add"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u0441\u0442")},H=n(143),Q=function(e){var t=e.children,n=e.type;return r.a.createElement(H.a,{type:n},t)};Q.defaultProps={type:""};function Y(){var e=Object(P.a)(["\n  width: 90%;\n  max-width: 1200px;\n  margin: 0 auto;\n"]);return Y=function(){return e},e}var ee=L.a.div(Y()),te=function(e){var t=e.children;return r.a.createElement(ee,null,t)};function ne(){var e=Object(P.a)(["\n  display: flex;\n  .article__image {\n    border-radius: 50%;\n    width: 40px;\n    height: 40px;\n  }\n\n  .article__meta {\n    display: flex;\n    flex-direction: column;\n  }\n"]);return ne=function(){return e},e}function ae(){var e=Object(P.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n\n  .article__title {\n    font-size: 25px;\n    line-height: 1.04;\n  }\n\n  .article__tag-list {\n    display: flex;\n    list-style: none;\n    padding: 0;\n    opacity: 0.7;\n    font-size: 12px;\n    text-transform: uppercase;\n\n    li {\n      margin-left: 10px;\n    }\n  }\n"]);return ae=function(){return e},e}function re(){var e=Object(P.a)(["\n  border-top: 1px solid rgba(0, 0, 0, 0.05);\n  max-width: 700px;\n  width: 100%;\n  padding: 35px 10px;\n  margin: 0 auto;\n"]);return re=function(){return e},e}var le=L.a.div(re()),ce=L.a.div(ae()),ie=L.a.div(ne()),oe=function(e){var t=e.article,n=r.a.createElement("div",null,r.a.createElement("ul",{className:"article__tag-list"},t.tagList.map((function(e){return r.a.createElement("li",{key:e},e)}))));return r.a.createElement(le,null,r.a.createElement(ie,null,r.a.createElement("div",null,r.a.createElement("a",{href:"#"},r.a.createElement("div",null,r.a.createElement("img",{className:"article__image",src:t.author.image,alt:t.author.username})))),r.a.createElement("div",{className:"article__meta"},r.a.createElement("a",{href:"#"},t.author.username),r.a.createElement("span",null,new Date(t.createdAt).toDateString()))),r.a.createElement(ce,null,r.a.createElement("div",null,r.a.createElement("h3",{className:"article__title"},t.title),r.a.createElement("span",null,t.favoritesCount)),0===t.tagList.length?null:n))},ue=n(394),se=function(e){return{type:"DOWNLOAD_PROGRESS",payload:e}},me=function(e){return function(t){p.getAll(e).then((function(e){var n=e.data;t({type:"ARTICLE_SUCCESS",payload:n}),t(se(!0))}))}};function de(){var e=Object(P.a)(["\n  display: flex;\n  justify-content: center;\n"]);return de=function(){return e},e}var pe={onSetPage:function(e){return{type:"SET_PAGE",payload:e}},getAllArticles:me},fe=function(e){var t=e.onSetPage,n=e.getAllArticles,a=e.articlesCount;if(a<=10)return null;return r.a.createElement(Ee,null,r.a.createElement(ue.a,{onChange:function(e){return function(e){t(10*e,n(e))}(e)},total:a}))},Ee=L.a.nav(de());fe.defaultProps={articlesCount:0};var he=Object(o.b)((function(e){var t=e.article;return{articles:t.articles,articlesCount:t.articlesCount}}),pe)(fe);function ge(){var e=Object(P.a)(["\n  display: flex;\n  justify-content: flex-end;\n"]);return ge=function(){return e},e}function be(){var e=Object(P.a)(["\n  width: 50%;\n  max-width: 700px;\n  margin: 0 auto;\n"]);return be=function(){return e},e}var ve=L.a.div(be()),xe=L.a.div(ge()),ye=Object(o.b)((function(e){return{state:e}}))((function(e){return console.log(e),r.a.createElement(ve,null,r.a.createElement(z.c,{initialValues:{title:"",description:"",content:"",tags:""},onSubmit:function(){return console.log("OK")}},r.a.createElement(R.a,null,r.a.createElement(X,{type:"text",name:"title",placeholder:"title",validating:!1}),r.a.createElement(X,{type:"text",name:"description",placeholder:"description",validating:!1}),r.a.createElement(K,{name:"content",placeholder:"content"}),r.a.createElement(X,{type:"text",name:"tags",placeholder:"tags",validating:!1}),r.a.createElement(xe,null,r.a.createElement(T.a,{size:"large"},"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c")))))})),Oe=function(e){return{type:"SET_USER_DATA_FAILURE",payload:e}};function _e(){var e=Object(P.a)(["\n  background: #eee;\n  padding: 30px 0;\n\n  > div {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n"]);return _e=function(){return e},e}var we={onLogout:function(){return{type:"LOGOUT"}}},je=L.a.div(_e()),Se=Object(o.b)((function(e){return{currentUser:e.auth.currentUser}}),we)((function(e){var t=e.onLogout,n=e.currentUser.username;return r.a.createElement(je,null,r.a.createElement(te,null,r.a.createElement("div",null,r.a.createElement("h1",null,n),r.a.createElement($,null)),r.a.createElement("div",null,r.a.createElement(H.a,{onClick:t},"\u0432\u044b\u0445\u043e\u0434"))))})),Ae=n(50),Ue=Ae.a().shape({username:Ae.b().max(50,"\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f"),password:Ae.b().min(8,"\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u0438\u043b\u0438 \u0431\u043e\u043b\u0435\u0435").max(40,"\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").test("pass","\u0422\u043e\u043b\u044c\u043a\u043e \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b \u0438 \u0446\u0438\u0444\u0440\u044b, \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u0430 \u0446\u0438\u0444\u0440\u0430 \u0438 \u043e\u0434\u043d\u0430 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0430\u044f \u0431\u0443\u043a\u0432\u0430",(function(e){return/(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])/.test(e)})).required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"),repeatPassword:Ae.b().test("passwords-match","\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u043e\u0434\u0430\u044e\u0442",(function(e){return this.parent.password===e})).required("Required"),email:Ae.b().email("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0435\u043a\u0442\u043d\u044b\u0435 E-mail").required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 E-mail")}),ke={newUserRegistration:function(e){return function(t){f.register({user:{username:e.username,email:e.email,password:e.password}}).then((function(e){var n=e.data.user;t({type:"REGISTER",payload:{user:n}})})).catch((function(e){var n=e.response.data.errors;t(Oe(n))}))}}},Pe=Object(o.b)((function(e){return{error:e.auth.error}}),ke)((function(e){var t=e.newUserRegistration,n=e.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h2",{className:"auth__title"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("p",{className:"auth__text"},"\u0414\u043b\u044f \u0432\u0445\u043e\u0434\u0430, \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),r.a.createElement(F,{backcolor:"#fff"},r.a.createElement(z.c,{initialValues:{username:"",password:"",repeatPassword:"",email:""},validationSchema:Ue,onSubmit:function(e,a){var r=a.setSubmitting,l=a.resetForm,c=a.setErrors;t(e),l(),r(!1),setTimeout(4,(function(){return c(n)}))}},r.a.createElement(R.a,null,r.a.createElement(X,{type:"mail",name:"email",placeholder:"E-Mail",icon:"mail",size:"large"}),r.a.createElement(X,{name:"username",placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",icon:"user",size:"large"}),r.a.createElement(W,{name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}),r.a.createElement(W,{name:"repeatPassword",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",size:"large"}),r.a.createElement("div",null,r.a.createElement(T.a,{size:"large",block:!0},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),r.a.createElement("div",{className:"form__link"},r.a.createElement(i.b,{to:"/login"},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"))))))})),Le=Ae.a().shape({password:Ae.b().min(8,"Must be 8 characters or more").max(40,"Must be 40 characters or less").test("pass","Latin letters and numbers only, at least one number and one capital letter",(function(e){return/(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])/.test(e)})).required("Required"),email:Ae.b().email("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0435\u043a\u0442\u043d\u044b\u0435 E-mail").required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 E-mail")}),Re={onLogin:function(e){return function(t){f.login({user:{email:e.email,password:e.password}}).then((function(e){var n=e.data.user;t({type:"LOGIN",payload:{user:n}})})).catch((function(e){var t=e.response.data.errors;Oe(t)}))}}},Te=Object(o.b)((function(e){return{currentUser:e.currentUser}}),Re)((function(e){console.log(e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h2",{className:"auth__title"},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),r.a.createElement("p",{className:"auth__text"},"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0432\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")),r.a.createElement(F,{backcolor:"#fff"},r.a.createElement(z.c,{initialValues:{password:"",email:""},validationSchema:Le,onSubmit:function(t,n){var a=n.setSubmitting,r=n.setErrors;e.onLogin(t,a,r)}},r.a.createElement(R.a,null,r.a.createElement(X,{type:"email",name:"email",placeholder:"E-mail",icon:"mail",size:"large"}),r.a.createElement(W,{name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",size:"large"}),r.a.createElement("div",null,r.a.createElement(T.a,{size:"large",block:!0},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")),r.a.createElement("div",{className:"form__link"},r.a.createElement(i.b,{to:"/signup"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))))))}));function ze(){var e=Object(P.a)(["\n  margin: 50px 0;\n"]);return ze=function(){return e},e}var Ce={articleLoaded:me,downloadProgress:se},Ne=L.a.div(ze()),Ie=Object(o.b)((function(e){return{articles:e.article.articles,currentPage:e.article.currentPage}}),Ce)((function(e){var t=e.articles;return r.a.createElement("div",null,r.a.createElement(te,null,t.map((function(e){return r.a.createElement(oe,{article:e,key:e.slug})})),r.a.createElement(Ne,null,r.a.createElement(he,null))))}));function Fe(){var e=Object(P.a)(["\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: #202002;\n\n  .block {\n    width: 100%;\n    max-width: 28%;\n  }\n\n  .auth__title {\n    font-size: 28px;\n    line-height: 33px;\n    margin-bottom: 5px;\n  }\n  .form__link {\n    margin-top: 30px;\n\n    a {\n      font-size: 16px;\n      line-height: 19px;\n      color: #adadad;\n\n      &:hover {\n        color: #1890ff;\n      }\n      &:focus {\n        color: #1890ff;\n      }\n      &:active {\n        color: #1890ff;\n      }\n    }\n  }\n\n  .auth__text {\n    opacity: 0.5;\n    font-weight: 300;\n    font-size: 18px;\n    line-height: 21px;\n  }\n  .btn {\n    width: 200px;\n    height: 200px;\n    background: #000;\n  }\n  .btn-2 {\n    background: red;\n  }\n"]);return Fe=function(){return e},e}var De=L.a.div(Fe()),Ge=Object(o.b)((function(e){return{isAutoUser:e.auth.isAutoUser}}))((function(e){return e.isAutoUser?r.a.createElement(k.a,{to:"/home"}):r.a.createElement(De,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(k.b,{exact:!0,path:"/login",component:Te}),r.a.createElement(k.b,{exact:!0,path:"/signup",component:Pe})))})),qe=Object(o.b)((function(e){return{isAutoUser:e.auth.isAutoUser,isProgres:e.article.isProgres}}))((function(e){var t=e.isAutoUser,n=e.isProgres;return console.log(n),t?r.a.createElement(r.a.Fragment,null,r.a.createElement(Se,null),n?r.a.createElement(Ie,null):r.a.createElement("div",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430")):r.a.createElement(k.a,{to:"/login"})}));function Me(){var e=Object(P.a)(["\n  margin: 50px 0;\n"]);return Me=function(){return e},e}var Ve=L.a.div(Me()),We=Object(o.b)((function(e){return{isAutoUser:e.auth.isAutoUser}}))((function(e){return e.isAutoUser?r.a.createElement(r.a.Fragment,null,r.a.createElement(Se,null),r.a.createElement(Ve,null,r.a.createElement(ye,null))):r.a.createElement(k.a,{to:"/login"})})),Be=(n(389),n(390),{getAllArticle:me,onLoad:function(){return function(e){f.current().then((function(t){var n=t.data;e(function(e){return{type:"SET_USER_DATA_SUCCESS",payload:e}}(n))})).catch((function(t){e(Oe(t))}))}}}),Je=function(e){function t(){return Object(w.a)(this,t),Object(S.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getAllArticle,n=e.onLoad,a=e.currentPage,r=window.localStorage.getItem("jwt");r&&E(r),t(a),n()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.d,null,r.a.createElement(k.b,{exact:!0,path:["/","/home"],component:qe}),r.a.createElement(k.b,{path:["/login","/signup"],component:Ge}),r.a.createElement(k.b,{path:"/add",component:We})))}}]),t}(r.a.Component);Je.defaultProps={currentPage:0};var Xe=Object(o.b)((function(e){return{isAutoUser:e.auth.isAutoUser,articles:e.article.articles,currentPage:e.article.currentPage}}),Be)(Je);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(i.a,null,r.a.createElement(o.a,{store:_},r.a.createElement(Xe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[225,1,2]]]);
//# sourceMappingURL=main.60bdc1c8.chunk.js.map